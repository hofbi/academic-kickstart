<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pre-Commit | Markus Hofbauer</title><link>https://hofbi.github.io/tags/pre-commit/</link><atom:link href="https://hofbi.github.io/tags/pre-commit/index.xml" rel="self" type="application/rss+xml"/><description>Pre-Commit</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>en-us</language><lastBuildDate>Thu, 16 Jan 2020 15:00:00 +0000</lastBuildDate><image><url>https://hofbi.github.io/media/icon_hu7729264130191091259.png</url><title>Pre-Commit</title><link>https://hofbi.github.io/tags/pre-commit/</link></image><item><title>Everything to know about pre-commit</title><link>https://hofbi.github.io/slides/pre-commit/</link><pubDate>Thu, 16 Jan 2020 15:00:00 +0000</pubDate><guid>https://hofbi.github.io/slides/pre-commit/</guid><description>&lt;h1 id="everything-to-know-about-pre-commit">Everything to know about &lt;code>pre-commit&lt;/code>&lt;/h1>
&lt;hr>
&lt;h2 id="automate-whenever-possible">Automate whenever possible&lt;/h2>
&lt;ul>
&lt;li>Guidelines&lt;/li>
&lt;li>Code format&lt;/li>
&lt;li>Static code analysis&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="how-to-manage-all-these-tools">How to manage all these tools&lt;/h2>
&lt;ul>
&lt;li>Shell scripts for every tool?&lt;/li>
&lt;li>Makefiles or similar frameworks?&lt;/li>
&lt;li>Git hooks calling the scripts?&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="drawbacks">Drawbacks&lt;/h2>
&lt;ul>
&lt;li>Script/tool maintenance&lt;/li>
&lt;li>Tooling setup/dependencies&lt;/li>
&lt;li>Forgot to run the checks locally&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="pre-commit">&lt;code>pre-commit&lt;/code>&lt;/h2>
&lt;blockquote>
&lt;p>A framework for managing and maintaining multi-language pre-commit hooks&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://pre-commit.com/" target="_blank" rel="noopener">pre-commit.com&lt;/a>&lt;/p>
&lt;hr>
&lt;h3 id="features">Features&lt;/h3>
&lt;ul>
&lt;li>Automatically setup all dependencies in virtual environments without root access required&lt;/li>
&lt;li>Manage all tools in a single configuration file &lt;code>.pre-commit-config.yaml&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="configuration">Configuration&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">default_stages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="l">commit]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">repos&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com/pre-commit/pre-commit-hooks&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v4.1.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hooks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">trailing-whitespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">end-of-file-fixer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com/psf/black&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">22.1.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hooks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">black&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">language_version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>--&lt;span class="l">quiet]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="usage">Usage&lt;/h3>
&lt;ol>
&lt;li>Setup once: &lt;code>pre-commit install&lt;/code>&lt;/li>
&lt;li>Now &lt;code>pre-commit&lt;/code> will run automatically on &lt;code>git commit&lt;/code>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="optional-usage">Optional Usage&lt;/h3>
&lt;p>Manually run &lt;code>pre-commit&lt;/code>&lt;/p>
&lt;ul>
&lt;li>All files: &lt;code>pre-commit run --all-files&lt;/code>&lt;/li>
&lt;li>Selected files: &lt;code>pre-commit run --files &amp;lt;list of files&amp;gt;&lt;/code>&lt;/li>
&lt;li>Selected hooks: &lt;code>pre-commit run black&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="output">Output&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pre-commit run --all-files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Initializing environment &lt;span class="k">for&lt;/span> https://github.com/pre-commit/pre-commit-hooks.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Initializing environment &lt;span class="k">for&lt;/span> https://github.com/psf/black.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Installing environment &lt;span class="k">for&lt;/span> https://github.com/pre-commit/pre-commit-hooks.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Once installed this environment will be reused.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> This may take a few minutes...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Installing environment &lt;span class="k">for&lt;/span> https://github.com/psf/black.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Once installed this environment will be reused.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> This may take a few minutes...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check Yaml...............................................................Passed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fix End of Files.........................................................Passed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trim Trailing Whitespace.................................................Failed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hook id: trailing-whitespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- &lt;span class="nb">exit&lt;/span> code: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Files were modified by this hook. Additional output:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fixing sample.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">black....................................................................Passed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="summary">Summary&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="flex justify-center ">
&lt;div class="w-100" >&lt;img src="https://miro.medium.com/max/1016/1*SE_FC8cspNAz_pFojUEsTg.jpeg" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>
&lt;/p></description></item></channel></rss>